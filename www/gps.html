<!DOCTYPE html>
<html>
<head>
	<title>Sample</title>

	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<!-- latlong of alley NYC: (40.7534388, -73.9901187) -->
	<link rel="stylesheet" href="http://leafletjs.com/dist/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="../dist/leaflet.ie.css" /><![endif]-->

	<script src="http://leafletjs.com/dist/leaflet.js"></script>
	<script src="https://github.com/maximeh/leaflet.bouncemarker/raw/master/bouncemarker.js"></script>

	<style>
		body {
			padding: 0;
			margin: 0;
		}
		html, body, #map {
			height: 500px;
		}
	</style>
</head>
<body>
	<div id="map"></div>

	<script>

	  var quoteArray = [
	    { latlng: (new L.LatLng(40.769106, -73.963144)), title: "Joe Bell's Bar"},
	    { latlng: (new L.LatLng(40.762711,-73.9739)), title:"Tiffany's" }
	  ]; //quoteArray

	  <!-- var map = L.map('map').setView([40.7534388, -73.9901187], 13); -->
	  var map = L.map('map').setView([40.752825,-73.981384], 18);

	  <!--  L.marker([40.752825,-73.981384]).addTo(map).bindPopup("Breakfast at Tiffany's").openPopup(); -->
	   var popup = L.marker([40.752825,-73.981384]).addTo(map).on('click', function() {
	    this.bounce(); });
	    popup.openPopup(); 

	  <!-- L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', { -->

	  <!-- L.tileLayer('http://maps.nypl.org/warper/layers/tile/909/{z}/{x}/{y}.png', { --> <!-- nypl historic maps --> 
	  L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
	    maxZoom: 18}).addTo(map);

	  function onLocationFound(e) {
	     var radius = e.accuracy / 2;
	     L.marker(e.latlng).addTo(map)
	        .bindPopup("You are within " + radius + " meters from this point").openPopup();
	     L.circle(e.latlng, radius).addTo(map);
	  } 

	  function onLocationError(e) {
	     alert(e.message);
	  }

	  map.on('locationfound', onLocationFound);
	  <!-- map.on('locationerror', onLocationError); --> <!-- alert when no geo found -->

	  map.locate({setView: true, maxZoom: 16});
	  map.on('click', onMapClick); <!-- trigger click events on map -->

	  var popup2 = L.popup(); <!-- setup new popup object when we click on map -->
	  var d = new L.LatLng(40.752825,-73.981384); <!-- set current marker point as the main distance var -->

	  <!-- figure out distance from item  -->
	  function onMapClick(e) {
	    popup2.setLatLng(e.latlng)
	      .setContent("you are: " + d.distanceTo(e.latlng).toFixed(1) + "m from here").openOn(map);
	    document.getElementById("distance").innerHTML = 
	      ("you are: " + d.distanceTo(e.latlng).toFixed(1) + "m from here");
	  }; <!-- onMapClick -->

	  <!-- test functions for buttons -->
	  function quoteOne() {
	    map.panTo( new L.LatLng(40.7534388, -73.9901187));
	  };

	  function quoteTwo() {
	    map.panTo( quoteArray[0].latlng );
	  }; //quoteTwo

	  <!-- figure out the bounds of the view screen we're in -->
	  function findBounds() {
	    document.getElementById("bounds").innerHTML =
	  (" map boundaries: <br /> top left: " + map.getBounds()._northEast.lat.toFixed(2) + "," + 
	                                          map.getBounds()._northEast.lng.toFixed(2) + 
 	                "<br /> bottom right: " + map.getBounds()._southWest.lat.toFixed(2) + "," + 
	                                          map.getBounds()._southWest.lng.toFixed(2));
	  }; //findBounds

	  var viewBounds = new L.Bounds();
	  var quoteMarker;

	  <!-- find quotes within the current view and have them show up -->
	  function findQuotes() {
	    //construct a bound object from current view
	    viewBounds = map.getBounds();

	    //test if the current view has a quote
	    for (var i=0; i<quoteArray.length; i++) {
	      if (viewBounds.contains(quoteArray[i].latlng ) ) {
	        document.getElementById("qList").innerHTML = quoteArray[i].title;
	        quoteMarker = L.marker(quoteArray[i].latlng).addTo(map).openPopup();
	      }
	      else {
	        document.getElementById("qList").innerHTML = "none found";
	        if (quoteMarker != undefined) {
	          map.removeLayer(quoteMarker);
	        } //if quoteMarker
	      } //else
            }//for all quotes
	  }; //findQuotes

	  map.on('dragend', findQuotes );	 

	</script>

	<div id="buttons"> 
	  <p> where are we? </p>
	  <button onclick="quoteOne()">Quote one</button>
	  <button onclick="quoteTwo()">Quote two</button>
	  <button onclick="findBounds()">Find Bounds</button>
	  <button onclick="findQuotes()">Find Quotes</button>
	  
	</div> <!-- quote -->
	<br />
	<div id="distance"><p>  </p></div>
	<br />
	<div id="bounds"> <p> </p></div>
	<div id="qList"> <p> </p> </div>



</body>
</html>
